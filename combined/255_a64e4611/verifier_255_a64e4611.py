import sys
from pathlib import Path

# Ensure parent dir (re-arc) is on sys.path so dsl resolves when run directly
sys.path.append(str(Path(__file__).resolve().parents[1]))

from dsl import *

def verify_a64e4611(I: Grid) -> Grid:
    x0 = mostcolor(I)
    x1 = shape(I)
    x2 = add(TWO, x1)
    x3 = canvas(x0, x2)
    x4 = asobject(I)
    x5 = shift(x4, UNITY)
    x6 = paint(x3, x5)
    x7 = double(SIX)
    x8 = astuple(ONE, x7)
    x9 = connect(UNITY, x8)
    x10 = outbox(x9)
    x11 = backdrop(x10)
    x12 = recolor(x0, x11)
    x13 = recolor(THREE, x9)
    x14 = lbind(shift, x13)
    x15 = lbind(mapply, x14)
    x16 = rbind(occurrences, x12)
    x17 = compose(x15, x16)
    x18 = fork(paint, identity, x17)
    x19 = x18(x6)
    x20 = ofcolor(x19, THREE)
    x21 = dmirror(x6)
    x22 = x18(x21)
    x23 = dmirror(x22)
    x24 = ofcolor(x23, THREE)
    x25 = combine(x20, x24)
    x26 = fill(x6, THREE, x25)
    x27 = astuple(TWO, ONE)
    x28 = dneighbors(UNITY)
    x29 = remove(x27, x28)
    x30 = recolor(x0, x29)
    x31 = initset(UNITY)
    x32 = recolor(THREE, x31)
    x33 = combine(x30, x32)
    x34 = recolor(x0, x33)
    x35 = astuple(ONE, THREE)
    x36 = initset(x35)
    x37 = insert(ZERO_BY_TWO, x36)
    x38 = insert(RIGHT, x37)
    x39 = insert(DOWN, x38)
    x40 = recolor(x0, x39)
    x41 = astuple(ONE, TWO)
    x42 = initset(x41)
    x43 = insert(UNITY, x42)
    x44 = recolor(THREE, x43)
    x45 = combine(x40, x44)
    x46 = recolor(x0, x45)
    x47 = lbind(shift, x34)
    x48 = lbind(mapply, x47)
    x49 = rbind(occurrences, x33)
    x50 = compose(x48, x49)
    x51 = fork(paint, identity, x50)
    x52 = lbind(shift, x46)
    x53 = lbind(mapply, x52)
    x54 = rbind(occurrences, x45)
    x55 = compose(x53, x54)
    x56 = fork(paint, identity, x55)
    x57 = compose(x51, x56)
    x58 = compose(rot90, x57)
    x59 = power(x58, FOUR)
    x60 = power(x59, TWO)
    x61 = asindices(x26)
    x62 = box(x61)
    x63 = fill(x26, THREE, x62)
    x64 = x60(x63)
    x65 = trim(x64)
    return x65